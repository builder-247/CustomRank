# API

This is the documentation of the CustomRank server API.

### Usage

Requests can be sent every 30 seconds.

### Status Codes

| Status Code | Type  | Description |
|-------------|-------|-------------|
|200| OK | Received on succesful exchange
|400| Bad Request | The request doesn't have all required parameters
|403| Forbidden | Failed to authenticate the player
|404| Not Found |  User tried to reach non-existing endpoint
|429| Too Many Requests | User not respecting the rate limit
|500| Internal Server Error | Something went wrong with the server

## /allowed_ranks

Returns an array of currently allowed custom ranks with formatting.

````HTTP
GET https://example.url/allowed_ranks
````

### Response

````php
{
    "success": true,         // true or false
    "ranks": [
        "&b[COOL]"
     ]
}
````

## /ranklist

This endpoint is used to retrieve list of custom ranks.

````HTTP
GET https://example.url/ranklist
````

### Response

````php
{
    "success": true,         // true or false
    "list": [
        {
            "username": "hypixel",
            "rank": "&b[COOL]"
        }
     ]
}
````

## /login

This endpoint is used the generate a session token later used to authenticate the player

````HTTP
POST https://example.url/login?username=hypixel&hash=hash
````

### Response

````php
{
    "success": true,         // true or false
    "token": "a7003bee-63b0-4963-817d-3576218b39a3"
}
````

### Parameters

| Parameter | Description          | Required|
|-----------|----------------------|---------|
|  username     | Player's username            | Yes |
|  hash   | A hash generated by the client used to authenticate the player | Yes |

## /setrank

This endpoint is used to set a custom rank for your account

````HTTP
POST https://example.url/setrank?username=hypixel&rank=%26b%5BCOOL%5D&token=a7003bee-63b0-4963-817d-3576218b39a3
````

### Parameters

| Parameter | Description          | Required|
|-----------|----------------------|---------|
|  username     | Player's username            | Yes |
|  rank   | URI encoded string of the wanted custom rank | Yes |
|  token   | A token generated by the server on login | Yes |

### Response

````php
{
    "success": true,         // true or false
    "rank": "&b[COOL]"
}
````